(window["webpackJsonplightning-decoder"]=window["webpackJsonplightning-decoder"]||[]).push([[0],{157:function(e,t,n){e.exports=n.p+"static/media/bolt.6f1ab4b1.png"},158:function(e,t,n){e.exports=n.p+"static/media/arrow.c97cc055.svg"},159:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAytJREFUeJzt3cFuozAUQNHOqP//yzP7LK4VwLEh5+wpNO2VJR4OPz8AAAAAAAAAAAAAE/05eNy/S69i7Oh1cg/b/j/9nXkVcHcCgSAQCAKBIBAIAoEgEAi/k36uuQXvuPr/5bK5ihUEgkAgCASCQCAIBIJAIAgEgkAgCASCQCAIBMKsZ7He9ek9ye86+6zQ7N9v9+s7a9mzfVYQCAKBIBAIAoEgEAgCgSAQCEfnIJ++Lz37fGfnAKPjZ88pZp9/98//1WXXawWBIBAIAoEgEAgCgSAQCAKBsMt+kLNmzwFGVu/HWP1dyKs//2msIBAEAkEgEAQCQSAQBAJBIBCeMgdZfZ/97vsxztr9+g6zgkAQCASBQBAIBIFAEAgEgUC4yxzk7u+vODsnWb3fYvfPfxorCASBQBAIBIFAEAgEgUAQCITHPsf/YavfD+LvOIkVBIJAIAgEgkAgCASCQCAIBMK37Ad5+n6L1ftNVn9+01hBIAgEgkAgCASCQCAIBIJAIOwyB9l9P8Xq489aff6Rba/PCgJBIBAEAkEgEAQCQSAQBAJh9f3vq3z7nGL18SOz9/NMYwWBIBAIAoEgEAgCgSAQCAKBsMscZPZ9/JHZP9/5z51/GSsIBIFAEAgEgUAQCASBQBAIhG3vP7+4+36Hp//81cdPYwWBIBAIAoEgEAgCgSAQCAKBcJc5yMjq/SCrjx95yt/546wgEAQCQSAQBAJBIBAEAkEgEO7ynvSR1e+vmG31+0lWsx8EdiQQCAKBIBAIAoEgEAgCgbDLHGTk6fsldn//xtfOYawgEAQCQSAQBAJBIBAEAkEgEHaZg9z9Pv3o/Lt/b9ZZ277f4ywrCASBQBAIBIFAEAgEgUAQCIRd5iCr7+OPrH4P+cjqOcPq809jBYEgEAgCgSAQCAKBIBAIAoFwdA7y6ef/V++nePp72Ed2n1O9uuzzsIJAEAgEgUAQCASBQBAIBIFAOHp//LHfg8QjmIPAJwgEgkAgCASCQCAIBIJAIAgEgkAgCASCQCDM+m7eq/cwe7br2bbd824FgSAQCAKBIBAIAoEgEAgCAQAAAAAAAAAAOO8/qSxQfUvWAucAAAAASUVORK5CYII="},160:function(e,t,n){e.exports=n.p+"static/media/github.ae2c64de.svg"},161:function(e,t,n){const a=n(176),r=n(21),i=n(265),s=n(1).Buffer,o=n(40),c=n(272),l=n(292),d=n(363),m={bitcoin:d.bitcoin.main.toBitcoinJS(),testnet:d.bitcoin.test.toBitcoinJS(),regtest:d.bitcoin.regtest.toBitcoinJS(),simnet:d.bitcoin.regtest.toBitcoinJS(),litecoin:d.litecoin.main.toBitcoinJS(),litecoin_testnet:d.litecoin.test.toBitcoinJS()};m.bitcoin.bech32="bc",m.testnet.bech32="tb",m.regtest.bech32="bcrt",m.simnet.bech32="sb",m.litecoin.bech32="ltc",m.litecoin_testnet.bech32="tltc";const u=m.main,h=[0],g={bc:"bitcoin",tb:"testnet",bcrt:"regtest",sb:"simnet",ltc:"litecoin",tltc:"litecoin_testnet"},p={m:new o(1e3,10),u:new o(1e6,10),n:new o(1e9,10),p:new o(1e12,10)},f=new o("2100000000000000000",10),v=new o(1e11,10),A=new o(1e8,10),E=new o(1e5,10),_=new o(100,10),w=new o(10,10),y={payment_hash:1,description:13,payee_node_key:19,purpose_commit_hash:23,expire_time:6,min_final_cltv_expiry:24,fallback_address:9,routing_info:3},b={};for(let P=0,U=Object.keys(y);P<U.length;P++){let e=U[P],t=y[U[P]].toString();b[t]=e}const S={payment_hash:Q,description:function(e){let t=function(e){return s.from(e,"utf8")}(e);return r.toWords(t)},payee_node_key:Q,purpose_commit_hash:function(e){let t;if(void 0===e||!("string"===typeof e||e instanceof String))throw new Error("purpose or purpose commit must be a string or hex string");t=e.match(/^([a-zA-Z0-9]{2})*$/)?s.from(e,"hex"):x(s.from(e,"utf8"));return r.toWords(t)},expire_time:k,min_final_cltv_expiry:k,fallback_address:function(e,t){return[e.code].concat(Q(e.addressHash))},routing_info:function(e){let t=s.from([]);return e.forEach(e=>{t=s.concat([t,R(e.pubkey)]),t=s.concat([t,R(e.short_channel_id)]),t=s.concat([t,s.from([0,0,0].concat(k(e.fee_base_msat,8)).slice(-4))]),t=s.concat([t,s.from([0,0,0].concat(k(e.fee_proportional_millionths,8)).slice(-4))]),t=s.concat([t,s.from([0].concat(k(e.cltv_expiry_delta,8)).slice(-2))])}),Q(t)}},N={1:e=>L(e,!0).toString("hex"),13:e=>L(e,!0).toString("utf8"),19:e=>L(e,!0).toString("hex"),23:e=>L(e,!0).toString("hex"),6:C,24:C,9:function(e,t){let n=e[0],a=L(e=e.slice(1),!0),r=null;switch(n){case 17:r=c.toBase58Check(a,t.pubKeyHash);break;case 18:r=c.toBase58Check(a,t.scriptHash);break;case 0:r=c.toBech32(a,n,t.bech32)}return{code:n,address:r,addressHash:a.toString("hex")}},3:function(e){let t,n,a,r,i,s=[],o=L(e,!0);for(;o.length>0;)t=o.slice(0,33).toString("hex"),n=o.slice(33,41).toString("hex"),a=parseInt(o.slice(41,45).toString("hex"),16),r=parseInt(o.slice(45,49).toString("hex"),16),i=parseInt(o.slice(49,51).toString("hex"),16),o=o.slice(51),s.push({pubkey:t,short_channel_id:n,fee_base_msat:a,fee_proportional_millionths:r,cltv_expiry_delta:i});return s}};function I(e){return t=>({tagCode:parseInt(e),words:r.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function C(e){return e.reverse().reduce((e,t,n)=>e+t*Math.pow(32,n),0)}function k(e,t){let n=[];if(void 0===t&&(t=5),0===(e=Math.floor(e)))return[0];for(;e>0;)n.push(e&Math.pow(2,t)-1),e=Math.floor(e/Math.pow(2,t));return n.reverse()}function x(e){return a.createHash("sha256").update(e).digest()}function B(e,t,n){let a=0,r=0,i=(1<<n)-1,s=[];for(let o=0;o<e.length;++o)for(a=a<<t|e[o],r+=t;r>=n;)r-=n,s.push(a>>r&i);return r>0&&s.push(a<<n-r&i),s}function L(e,t){let n=s.from(B(e,5,8));return t&&5*e.length%8!==0&&(n=n.slice(0,-1)),n}function R(e){return void 0!==e&&("string"===typeof e||e instanceof String)&&e.match(/^([a-zA-Z0-9]{2})*$/)?s.from(e,"hex"):e}function Q(e){let t=R(e);return r.toWords(t)}function T(e,t){let n=e.filter(e=>e.tagName===t);return n.length>0?n[0].data:null}function M(e,t){return null!==T(e,t)}function q(e){let t={};return Object.keys(e).sort().forEach(n=>{t[n]=e[n]}),t}function O(e){if(!e.toString().match(/^\d+$/))throw new Error("satoshis must be an integer");return D(new o(e,10).mul(new o(1e3,10)))}function D(e){if(!e.toString().match(/^\d+$/))throw new Error("millisatoshis must be an integer");let t,n,a=new o(e,10),r=a.toString(10),i=r.length;return i>11&&/0{11}$/.test(r)?(t="",n=a.div(v).toString(10)):i>8&&/0{8}$/.test(r)?(t="m",n=a.div(A).toString(10)):i>5&&/0{5}$/.test(r)?(t="u",n=a.div(E).toString(10)):i>2&&/0{2}$/.test(r)?(t="n",n=a.div(_).toString(10)):(t="p",n=a.mul(w).toString(10)),n+t}function K(e,t){let n=F(e,!1);if(!n.mod(new o(1e3,10)).eq(new o(0,10)))throw new Error("Amount is outside of valid range");let a=n.div(new o(1e3,10));return t?a.toString():a}function F(e,t){let n,a;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),a=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");a=e}if(!a.match(/^\d+$/))throw new Error("Not a valid human readable amount");let r=new o(a,10),i=n?r.mul(v).div(p[n]):r.mul(v);if("p"===n&&!r.mod(new o(10,10)).eq(new o(0,10))||i.gt(f))throw new Error("Amount is outside of valid range");return t?i.toString():i}e.exports={encode:function(e,t){let n=l(e);void 0===t&&(t=!0);let a,d,g,p,f,v,A=!(void 0===n.signature||void 0===n.recoveryFlag);if(void 0!==n.coinType||A){if(void 0===n.coinType&&A)throw new Error("Need coinType for proper payment request reconstruction");if(!m[n.coinType])throw new Error("Unknown coin type");a=m[n.coinType]}else n.coinType="main",a=u;if(void 0!==n.timestamp||A){if(void 0===n.timestamp&&A)throw new Error("Need timestamp for proper payment request reconstruction")}else n.timestamp=Math.floor((new Date).getTime()/1e3);if(void 0===n.tags)throw new Error("Payment Requests need tags array");if(!M(n.tags,b[1]))throw new Error("Lightning Payment Request needs a payment hash");if(!M(n.tags,b[13])&&!M(n.tags,b[23])){if(!t)throw new Error("Payment request requires description or purpose commit hash");n.tags.push({tagName:b[13],data:""})}if(M(n.tags,b[13])&&s.from(T(n.tags,b[13]),"utf8").length>639)throw new Error("Description is too long: Max length 639 bytes");if(M(n.tags,b[6])||A||!t||n.tags.push({tagName:b[6],data:3600}),M(n.tags,b[24])||A||!t||n.tags.push({tagName:b[24],data:9}),M(n.tags,b[19])&&(g=R(T(n.tags,b[19]))),n.payeeNodeKey&&(d=R(n.payeeNodeKey)),d&&g&&!g.equals(d))throw new Error("payeeNodeKey and tag payee node key do not match");if(d=d||g,d&&(n.payeeNodeKey=d.toString("hex")),M(n.tags,b[9])){let e=T(n.tags,b[9]);if(v=e.address,f=e.addressHash,p=e.code,void 0===f||void 0===p){let t,n;try{t=c.fromBech32(v),f=t.data,p=t.version}catch(F){try{n=c.fromBase58Check(v),n.version===a.pubKeyHash?p=17:n.version===a.scriptHash&&(p=18),f=n.hash}catch(P){throw new Error("Fallback address type is unknown")}}if(t&&!(t.version in h))throw new Error("Fallback address witness version is unknown");if(t&&t.prefix!==a.bech32)throw new Error("Fallback address network type does not match payment request network type");if(n&&n.version!==a.pubKeyHash&&n.version!==a.scriptHash)throw new Error("Fallback address version (base58) is unknown or the network type is incorrect");e.addressHash=f.toString("hex"),e.code=p}}if(M(n.tags,b[3])){T(n.tags,b[3]).forEach(e=>{if(void 0===e.pubkey||void 0===e.short_channel_id||void 0===e.fee_base_msat||void 0===e.fee_proportional_millionths||void 0===e.cltv_expiry_delta)throw new Error("Routing info is incomplete");if(!i.publicKeyVerify(R(e.pubkey)))throw new Error("Routing info pubkey is not a valid pubkey");let t=R(e.short_channel_id);if(!(t instanceof s)||8!==t.length)throw new Error("Routing info short channel id must be 8 bytes");if("number"!==typeof e.fee_base_msat||Math.floor(e.fee_base_msat)!==e.fee_base_msat)throw new Error("Routing info fee base msat is not an integer");if("number"!==typeof e.fee_proportional_millionths||Math.floor(e.fee_proportional_millionths)!==e.fee_proportional_millionths)throw new Error("Routing info fee proportional millionths is not an integer");if("number"!==typeof e.cltv_expiry_delta||Math.floor(e.cltv_expiry_delta)!==e.cltv_expiry_delta)throw new Error("Routing info cltv expiry delta is not an integer")})}let E,_="ln";if(_+=a.bech32,n.millisatoshis&&n.satoshis){if(E=D(new o(n.millisatoshis,10)),O(new o(n.satoshis,10))!==E)throw new Error("satoshis and millisatoshis do not match")}else E=n.millisatoshis?D(new o(n.millisatoshis,10)):n.satoshis?O(new o(n.satoshis,10)):"";_+=E;let w=k(n.timestamp),N=n.tags,I=[];N.forEach(e=>{const t=Object.keys(S);if(A&&t.push("unknownTag"),-1===t.indexOf(e.tagName))throw new Error("Unknown tag key: "+e.tagName);let n;if("unknownTag"!==e.tagName){I.push(y[e.tagName]);n=(0,S[e.tagName])(e.data)}else{let t=function(e){return e.words=r.decode(e.words,Number.MAX_SAFE_INTEGER).words,e}(e.data);I.push(t.tagCode),n=t.words}I=I.concat([0].concat(k(n.length)).slice(-2)),I=I.concat(n)});let C,L=w.concat(I),K=x(s.concat([s.from(_,"utf8"),s.from(B(L,5,8))]));if(A){if(!d)throw new Error("Reconstruction with signature and recoveryID requires payeeNodeKey to verify correctness of input data.");{let e=i.recover(K,s.from(n.signature,"hex"),n.recoveryFlag,!0);if(d&&!d.equals(e))throw new Error("Signature, message, and recoveryID did not produce the same pubkey as payeeNodeKey");C=Q(n.signature+"0"+n.recoveryFlag)}}return C&&(L=L.concat(C)),M(n.tags,b[6])&&(n.timeExpireDate=n.timestamp+T(n.tags,b[6]),n.timeExpireDateString=new Date(1e3*n.timeExpireDate).toISOString()),n.timestampString=new Date(1e3*n.timestamp).toISOString(),n.paymentRequest=n.complete?r.encode(_,L,Number.MAX_SAFE_INTEGER):"",n.prefix=_,n.wordsTemp=r.encode("temp",L,Number.MAX_SAFE_INTEGER),n.complete=!!C,q(n)},decode:function(e,t){if("string"!==typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");let n=r.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();let a=n.prefix,o=n.words,c=o.slice(-104),l=o.slice(0,-104);o=o.slice(0,-104);let d=L(c,!0),u=d.slice(-1)[0];if(d=d.slice(0,-1),!(u in[0,1,2,3])||64!==d.length)throw new Error("Signature is missing or incorrect");let h=a.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(h&&!h[2]&&(h=a.match(/^ln(\S+)$/)),!h)throw new Error("Not a proper lightning payment request");let p,f,v=h[1];if(g[v]?(f=g[v],p=m[f]):t&&t.bech32&&(f="unknown",p=t),!p||p.bech32!==v)throw new Error("Unknown coin bech32 prefix");let A,E,_,w=h[2];if(w){let e=h[3];try{A=parseInt(K(w+e,!0))}catch(j){A=null,_=!0}E=F(w+e,!0)}else A=null,E=null;let y=C(o.slice(0,7)),S=new Date(1e3*y).toISOString();o=o.slice(7);let k,R,Q,O,D,P,U=[];for(;o.length>0;){let e=o[0].toString();k=b[e]||"unknownTag",R=N[e]||I(e),o=o.slice(1),Q=C(o.slice(0,2)),o=o.slice(2),O=o.slice(0,Q),o=o.slice(Q),U.push({tagName:k,data:R(O,p)})}M(U,b[6])&&(D=y+T(U,b[6]),P=new Date(1e3*D).toISOString());let H=x(s.concat([s.from(a,"utf8"),s.from(B(l,5,8))])),J=i.recover(H,d,u,!0);if(M(U,b[19])&&T(U,b[19])!==J.toString("hex"))throw new Error("Lightning Payment Request signature pubkey does not match payee pubkey");let W={paymentRequest:e,complete:!0,prefix:a,wordsTemp:r.encode("temp",l.concat(c),Number.MAX_SAFE_INTEGER),coinType:f,satoshis:A,millisatoshis:E,timestamp:y,timestampString:S,payeeNodeKey:J.toString("hex"),signature:d.toString("hex"),recoveryFlag:u,tags:U};return _&&delete W.satoshis,D&&(W=Object.assign(W,{timeExpireDate:D,timeExpireDateString:P})),q(W)},sign:function(e,t){let n,a,o=l(e),c=R(t);if(o.complete&&o.paymentRequest)return o;if(void 0===c||32!==c.length||!i.privateKeyVerify(c))throw new Error("privateKey must be a 32 byte Buffer and valid private key");if(M(o.tags,b[19])&&(a=R(T(o.tags,b[19]))),o.payeeNodeKey&&(n=R(o.payeeNodeKey)),n&&a&&!a.equals(n))throw new Error("payee node key tag and payeeNodeKey attribute must match");n=a||n;let d=i.publicKeyCreate(c);if(n&&!d.equals(n))throw new Error("The private key given is not the private key of the node public key given");let m=r.decode(o.wordsTemp,Number.MAX_SAFE_INTEGER).words,u=x(s.concat([s.from(o.prefix,"utf8"),L(m)])),h=i.sign(u,c),g=Q(h.signature.toString("hex")+"0"+h.recovery);return o.payeeNodeKey=d.toString("hex"),o.signature=h.signature.toString("hex"),o.recoveryFlag=h.recovery,o.wordsTemp=r.encode("temp",m.concat(g),Number.MAX_SAFE_INTEGER),o.complete=!0,o.paymentRequest=r.encode(o.prefix,m.concat(g),Number.MAX_SAFE_INTEGER),q(o)},satToHrp:O,millisatToHrp:D,hrpToSat:K,hrpToMillisat:F}},162:function(e,t,n){e.exports=n(385)},177:function(e,t){},179:function(e,t){},189:function(e,t){},191:function(e,t){},218:function(e,t){},220:function(e,t){},221:function(e,t){},226:function(e,t){},228:function(e,t){},247:function(e,t){},259:function(e,t){},262:function(e,t){},271:function(e,t){},279:function(e,t){},383:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(154),s=n.n(i),o=n(155),c=n.n(o),l=n(10),d=n.n(l),m=n(157),u=n.n(m),h=n(158),g=n.n(h),p=n(86),f=n.n(p),v=n(159),A=n.n(v),E=n(160),_=n.n(E);const w=e=>{switch(e){case"coinType":return"Chain";case"payeeNodeKey":return"Payee Pub Key";case"expire_time":return"Expire Time";case"paymentRequest":return"Invoice";case"prefix":return"Prefix";case"recoveryFlag":return"Recovery Flag";case"satoshis":return"Amount (Satoshis)";case"millisatoshis":return"Amount (Millisatoshis)";case"signature":return"Transaction Signature";case"timestampString":return"Timestamp String";case"wordsTemp":return"Words Temp";case"purpose_commit_hash":return"Commit Hash";case"payment_hash":return"Payment Hash";case"fallback_address":return"Fallback Address";case"addressHash":return"Address Hash";case"address":return"Address";case"code":return"Code";case"description":return"Description";case"expiry_htlc":return"Expiry CLTV";case"timeExpireDateString":return"Time Expire Date String";case"timeExpireDate":return"Time Expire Date";case"timestamp":return"Timestamp";case"min_final_cltv_expiry":return"Minimum Final CLTV Expiry";case"unknownTag":return"Unknown Tag";case"routing_info":return"Routing Info";case"tagCode":return"Tag Code";case"words":return"Tag Words";case"cltv_expiry_delta":return"CLTV Expiry Delta";case"fee_base_msat":return"Fee Base (MSats)";case"fee_proportional_millionths":return"Tag Words";case"pubkey":return"Public Key";case"short_channel_id":return"Short Channel ID";case"callback":return"Callback URL";case"commentAllowed":return"Comment Allowed (Chars)";case"maxSendable":return"Max Sendable (MSats)";case"minSendable":return"Min Sendable (MSats)";case"minWithdrawable":return"Max Withdrawable (MSats)";case"minWithdrawable":return"Min Withdrawable (MSats)";case"tag":return"LNURL Tag/Type";case"metadata":return"LNURL Metadata";case"k1":return"K1";case"defaultDescription":return"Description";case"domain":return"Domain";case"username":return"Username"}};var y=n(21),b=n.n(y),S=n(3);var N=n(161),I=n.n(N);const C=e=>{const t=b.a.decode(e,1500),n=S.Buffer.from(b.a.fromWords(t.words)).toString();return fetch("https://satcors.fiatjaf.com/?url="+encodeURIComponent(n)).then(e=>e.json())},k=e=>{const t=e.split("@");if(2!==t.length)return{success:!1,message:"Invalid internet identifier format."};const[n,a]=t;if(-1===t[1].indexOf("."))return{success:!1,message:"Invalid internet identifier format."};const r="https://".concat(a,"/.well-known/lnurlp/").concat(n);return fetch("https://satcors.fiatjaf.com/?url="+encodeURIComponent(r)).then(e=>e.json()).then(e=>(e.domain=a,{success:!0,data:{...e,domain:a,username:n}})).catch(e=>({success:!1,message:"This identifier does not support Lightning Address yet."}))},x=e=>{if(!e.includes("lnbc"))return null;return I.a.decode(e)};n(383);const B={text:"",error:{},hasError:!1,decodedInvoice:{},isLNAddress:!1,isQRCodeOpened:!1,isInvoiceLoaded:!1,isBitcoinAddrOpened:!1};class L extends a.PureComponent{constructor(){super(...arguments),this.state=B,this.clearInvoiceDetails=()=>{const e=window.location.origin;window.history.pushState({},null,"".concat(e)),this.setState(()=>({...B}))},this.getInvoiceDetails=async e=>{if(!e)return this.setState(()=>({hasError:!0,decodedInvoice:{},isInvoiceLoaded:!1,error:{message:"Please enter a valid request or address and try again."}}));try{let t;const n=await(async e=>{if(!e||""===e)return null;const t=e.trim().toLowerCase();let n=t;if(/\S+@\S+\.\S+/.test(n)){const{success:e,data:t,message:a}=await k(n);return e?{data:t,isLNURL:!0,isLNAddress:!0}:{data:null,error:a,isLNURL:!1,isLNAddress:!0}}-1!==t.indexOf("".concat("lightning",":"))&&(n=t.slice(10,t.length));-1!==t.indexOf("".concat("lnurl",":"))&&(n=t.slice(6,t.length));return n.startsWith("lnurl")?{isLNURL:!0,data:C(n)}:{isLNURL:!1,data:x(n)}})(e);if(!n)return this.setState(()=>({hasError:!0,decodedInvoice:{},isInvoiceLoaded:!1,error:{message:"Please enter a valid request or address and try again."}}));const{isLNURL:a,data:r,error:i,isLNAddress:s}=n;if(i&&i.length>0)return this.setState(()=>({hasError:!0,decodedInvoice:{},isInvoiceLoaded:!1,error:{message:i}}));if(!r)return this.setState(()=>({hasError:!0,decodedInvoice:{},isInvoiceLoaded:!1,error:{message:"Could not parse/understand this invoice or request. Please try again."}}));if(t=a?s?r:await r:r,t){const n=window.location,r=window.location.origin,i=window.location.pathname;i&&""!==i&&window.history.pushState({},null,"".concat(r)),window.history.pushState({},null,"".concat(n).concat(e)),this.setState(()=>({isLNURL:a,error:{},isLNAddress:s,hasError:!1,isInvoiceLoaded:!0,decodedInvoice:t}))}}catch(t){this.setState(()=>({error:t,hasError:!0,decodedInvoice:{},isInvoiceLoaded:!1}))}},this.handleChange=e=>{const{target:{value:t}}=e;this.setState(()=>({text:t,error:{},hasError:!1}))},this.handleKeyPress=e=>{const{text:t}=this.state;"Enter"===e.key&&this.getInvoiceDetails(t)},this.handleQRCode=()=>this.setState(e=>({isQRCodeOpened:!e.isQRCodeOpened})),this.renderErrorDetails=()=>{const{hasError:e,error:t}=this.state;return e?r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"error__container"},r.a.createElement("div",{className:"error__message"},t.message))):null},this.renderInput=()=>{const{text:e}=this.state;return r.a.createElement("div",{className:"input"},r.a.createElement("img",{alt:"Lightning",src:u.a,className:"input__asset"}),r.a.createElement("input",{value:e,className:"input__text",onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:"Enter Invoice",autoFocus:!0}))},this.renderInvoiceDetails=()=>{const{decodedInvoice:e,isInvoiceLoaded:t}=this.state,n=d()("invoice",{"invoice--opened":t}),a=Object.keys(e).map(e=>{switch(e){case"complete":return null;case"tags":return this.renderInvoiceInnerItem(e);case"timestampString":return this.renderInvoiceItem(e,"timestampString");default:return this.renderInvoiceItem(e)}});return t?r.a.createElement("div",{className:n},a):null},this.renderInvoiceInnerItem=e=>{const{decodedInvoice:t}=this.state,n=t[e],a=(e,t)=>r.a.createElement("div",{key:e,className:"invoice__nested-item"},r.a.createElement("div",{className:"invoice__nested-title"},w(e)),r.a.createElement("div",{className:"invoice__nested-value"},t)),i=e=>r.a.createElement("div",{key:e.tagName,className:"invoice__item invoice__item--nested"},r.a.createElement("div",{className:"invoice__item-title"},w(e.tagName)),r.a.createElement("div",{className:"invoice__item-value invoice__item-value--nested"},"string"===typeof e.data&&r.a.createElement("div",{className:"invoice__nested-value"},e.data),Array.isArray(e.data)&&e.data.map(e=>r.a.createElement(r.a.Fragment,null,Object.keys(e).map(t=>a(t,e[t])))),!Array.isArray(e.data)&&("string"!==typeof e.data||"number"!==typeof e.data)&&r.a.createElement(r.a.Fragment,null,Object.keys(e.data).map(t=>a(t,e.data[t]))))),s=e=>r.a.createElement("div",{key:e.tagName,className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},w(e.tagName)),r.a.createElement("div",{className:"invoice__item-value"},"".concat(e.data||"--")));return n.map(e=>(e=>"string"!==typeof e.data&&"number"!==typeof e.data?i(e):s(e))(e))},this.renderInvoiceItem=(e,t)=>{const{decodedInvoice:n}=this.state;let a="".concat(n[e]);return r.a.createElement("div",{key:e,className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},w(e)),r.a.createElement("div",{className:"invoice__item-value"},a))},this.renderLogo=()=>r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"logo__title"},"Lightning Decoder"),r.a.createElement("div",{className:"logo__subtitle"},"Decode Lightning Network Requests",r.a.createElement("span",{className:"logo__subtitle-small"},"BOLT11, LNURL, and Lightning Address"))),this.renderLNURLDetails=()=>{const{decodedInvoice:e,isInvoiceLoaded:t}=this.state,n=d()("invoice",{"invoice--opened":t});let a=e;return t?r.a.createElement("div",{className:n},Object.keys(a).map(t=>{let n=e[t];if("status"===t)return r.a.createElement(r.a.Fragment,null);if("tag"===t){switch(t){case"payRequest":n="LNURL Pay (payRequest)";break;case"withdrawRequest":n="LNURL Withdraw (withdrawRequest)"}return r.a.createElement("div",{key:"".concat(t,"-").concat(Math.random()),className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},w(t)),r.a.createElement("div",{className:"invoice__item-value"},r.a.createElement("a",{href:e[t]},n)))}if("callback"===t)return r.a.createElement("div",{key:"".concat(t,"-").concat(Math.random()),className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},w(t)),r.a.createElement("div",{className:"invoice__item-value"},r.a.createElement("a",{href:e[t]},e[t])));if("metadata"===t){return JSON.parse(e[t]).map(e=>"text/plain"===e[0]?r.a.createElement("div",{key:"".concat(t,"-").concat(Math.random()),className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},"Description"),r.a.createElement("div",{className:"invoice__item-value"},e[1])):"text/identifier"===e[0]?r.a.createElement("div",{key:"".concat(t,"-").concat(Math.random()),className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},"Lightning Address"),r.a.createElement("div",{className:"invoice__item-value"},e[1])):"image/png;base64"===e[0]?r.a.createElement("div",{key:"".concat(t,"-").concat(Math.random()),className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},"Image"),r.a.createElement("div",{className:"invoice__item-value"},r.a.createElement("img",{alt:"Imager",style:{maxWidth:"200px"},src:"data:image/png;base64,".concat(e[1])}))):void 0)}return r.a.createElement("div",{key:"".concat(t,"-").concat(Math.random()),className:"invoice__item"},r.a.createElement("div",{className:"invoice__item-title"},w(t)),r.a.createElement("div",{className:"invoice__item-value"},e[t]))})):null},this.renderSubmit=()=>{const{isInvoiceLoaded:e,text:t}=this.state,n=d()("submit",{submit__close:e});return r.a.createElement("div",{onClick:()=>{e?this.clearInvoiceDetails():this.getInvoiceDetails(t)},className:n},r.a.createElement("img",{alt:"Submit",src:e?f.a:g.a,className:"submit__asset"}))},this.renderOptions=()=>{const{isInvoiceLoaded:e}=this.state,t=d()("options",{"options--hide":e});return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"options__wrapper"},r.a.createElement("a",{href:"https://github.com/j-chimienti/lightning-decoder",className:"options__github",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"options__github-icon",src:_.a,alt:"GitHub"}))))},this.renderCamera=()=>{const{isQRCodeOpened:e,isInvoiceLoaded:t}=this.state,n=d()({qrcode:!0,"qrcode--opened":e}),a=d()("qrcode__container",{"qrcode__container--opened":e}),i=d()("qrcode__img",{"qrcode__img--opened":e}),s=e?f.a:A.a;return t?null:r.a.createElement("div",{className:n},e&&r.a.createElement("div",{className:"qrcode__modal"}),r.a.createElement("div",{className:a},r.a.createElement("img",{className:i,src:s,alt:"QRCode",onClick:this.handleQRCode}),e?r.a.createElement(c.a,{delay:300,onError:e=>this.setState(()=>({isInvoiceLoaded:!1,hasError:!0,error:e,isQRCodeOpened:!1})),onScan:e=>{if(Object.is(e,null))return;let t=e;e.includes("lightning")&&(t=e.split("lightning:")[1]),this.getInvoiceDetails(t),this.setState(()=>({isQRCodeOpened:!1,text:t}))},style:{width:"100%",border:"2pt solid #000000"}}):null))}}componentDidMount(){const e=window.location.pathname.split("/")[1];e&&""!==e&&(this.setState(()=>({text:e})),this.getInvoiceDetails(e))}render(){const{isLNURL:e,isInvoiceLoaded:t,hasError:n}=this.state,a=d()("app",{"app--opened":t}),i=d()("app__column",{"app__column--invoice-loaded":t,"app__column--error":n}),s=d()("app__submit",{"app__submit--invoice-loaded":t});return r.a.createElement("div",{className:a},this.renderOptions(),this.renderLogo(),r.a.createElement("div",{className:"app__row"},this.renderInput(),r.a.createElement("div",{className:s},this.renderSubmit(),this.renderCamera())),r.a.createElement("div",{className:i},e?this.renderLNURLDetails():this.renderInvoiceDetails(),this.renderErrorDetails()))}}s.a.render(r.a.createElement(L,null),document.getElementById("root"))},86:function(e,t,n){e.exports=n.p+"static/media/close.3f436264.svg"}},[[162,1,2]]]);
//# sourceMappingURL=main.84ad2638.chunk.js.map